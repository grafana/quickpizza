resources:
  - ../base
  - ../base/resources/grafana-alloy


# For telemetry functionality, change the following lines to match your configuration.
secretGenerator:
  - name: grafana-alloy-credentials
    envs:
    - .env

# You can use the following generator to add additional environment variables to all QuickPizza pods.
configMapGenerator:
  - name: quickpizza-env
    literals:
      # Trust all incoming TraceIDs for demo purposes.
      - QUICKPIZZA_TRUST_CLIENT_TRACEID=true
      - QUICKPIZZA_OTEL_SERVICE_NAME_LEGACY=1
      # TODO: not working
      - QUICKPIZZA_PYROSCOPE_ENDPOINT=http://grafana-alloy:9999
  - name: alloy-config
    files:
      - ./config/config.alloy
  - name: tracing-env
    literals:
      - QUICKPIZZA_OTLP_ENDPOINT=http://grafana-alloy:4318
